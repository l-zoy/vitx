{"version":3,"sources":["getBabelConifg.ts"],"names":["getBabelConfig","bundleOpts","isBrowser","nodeVersion","moduleType","runtimeHelpers","extraBabelPlugins","extraBabelPresets","disableTypes","sourceMaps","react","presets","require","resolve","targets","browsers","node","modules","filter","Boolean","plugins","lazy","legacy","loose","useESModules","version"],"mappings":";;;;;;;AAEc,SAAUA,cAAV,CACZC,UADY,EAEZC,SAFY,EAEO;AAAA,QAGjBC,WAHiB,GAWfF,UAXe,CAGjBE,WAHiB;AAAA,QAIjBC,UAJiB,GAWfH,UAXe,CAIjBG,UAJiB;AAAA,QAKjBC,cALiB,GAWfJ,UAXe,CAKjBI,cALiB;AAAA,gCAWfJ,UAXe,CAMjBK,iBANiB;AAAA,QAMjBA,iBANiB,sCAMG,EANH;AAAA,iCAWfL,UAXe,CAOjBM,iBAPiB;AAAA,QAOjBA,iBAPiB,uCAOG,EAPH;AAAA,QAQjBC,YARiB,GAWfP,UAXe,CAQjBO,YARiB;AAAA,QASjBC,UATiB,GAWfR,UAXe,CASjBQ,UATiB;AAAA,QAUjBC,KAViB,GAWfT,UAXe,CAUjBS,KAViB;AAanB,SAAO;AACLC,IAAAA,OAAO,EAAE,CACPH,YAAY,IAAII,OAAO,CAACC,OAAR,CAAgB,0BAAhB,CADT,EAEP,CACED,OAAO,CAACC,OAAR,CAAgB,mBAAhB,CADF,EAEE;AACEC,MAAAA,OAAO,EAAEZ,SAAS,GACd;AAAEa,QAAAA,QAAQ,EAAE,CAAC,iBAAD,EAAoB,OAApB;AAAZ,OADc,GAEd;AAAEC,QAAAA,IAAI,EAAEb,WAAF,aAAEA,WAAF,cAAEA,WAAF,GAAiB;AAAvB,OAHN;AAIEc,MAAAA,OAAO,EAAEf,SAAS,GAAG,KAAH,GAAW;AAJ/B,KAFF,CAFO,EAWPA,SAAS,IAAIQ,KAAb,IAAsB,qBAXf,EAYP,GAAGH,iBAZI,EAaPW,MAbO,CAaAC,OAbA,CADJ;AAeLC,IAAAA,OAAO,EAAE,CACPhB,UAAU,KAAK,KAAf,IACE,CAACF,SADH,IACgB,CACZU,OAAO,CAACC,OAAR,CAAgB,0CAAhB,CADY,EAEZ;AAAEQ,MAAAA,IAAI,EAAE;AAAR,KAFY,CAFT,EAMPT,OAAO,CAACC,OAAR,CAAgB,4CAAhB,CANO,EAOPD,OAAO,CAACC,OAAR,CAAgB,uCAAhB,CAPO,EAQPD,OAAO,CAACC,OAAR,CAAgB,8CAAhB,CARO,EASPD,OAAO,CAACC,OAAR,CAAgB,oDAAhB,CATO,EAUPD,OAAO,CAACC,OAAR,CAAgB,0CAAhB,CAVO,EAWPD,OAAO,CAACC,OAAR,CAAgB,qCAAhB,CAXO,EAYP,CAACD,OAAO,CAACC,OAAR,CAAgB,mCAAhB,CAAD,EAAuD;AAAES,MAAAA,MAAM,EAAE;AAAV,KAAvD,CAZO,EAaP,CACEV,OAAO,CAACC,OAAR,CAAgB,yCAAhB,CADF,EAEE;AAAEU,MAAAA,KAAK,EAAE;AAAT,KAFF,CAbO,EAiBPlB,cAAc,IAAI,CAChBO,OAAO,CAACC,OAAR,CAAgB,iCAAhB,CADgB,EAEhB;AACEW,MAAAA,YAAY,EAAEtB,SAAS,IAAIE,UAAU,KAAK,KAD5C;AAEEqB,MAAAA,OAAO,EAAEb,OAAO,CAAC,6BAAD,CAAP,CAAuCa;AAFlD,KAFgB,CAjBX,EAwBP,GAAGnB,iBAxBI,EAyBPY,MAzBO,CAyBAC,OAzBA,CAfJ;AAyCLV,IAAAA;AAzCK,GAAP;AA2CD","file":"getBabelConifg.js","sourcesContent":["import type { IBundleOptions } from './types'\n\nexport default function getBabelConfig(\n  bundleOpts: Omit<IBundleOptions, 'entry' | 'output'>,\n  isBrowser?: boolean\n) {\n  const {\n    nodeVersion,\n    moduleType,\n    runtimeHelpers,\n    extraBabelPlugins = [],\n    extraBabelPresets = [],\n    disableTypes,\n    sourceMaps,\n    react\n  } = bundleOpts\n\n  return {\n    presets: [\n      disableTypes && require.resolve('@babel/preset-typescript'),\n      [\n        require.resolve('@babel/preset-env'),\n        {\n          targets: isBrowser\n            ? { browsers: ['last 2 versions', 'IE 10'] }\n            : { node: nodeVersion ?? 6 },\n          modules: isBrowser ? false : 'auto'\n        }\n      ],\n      isBrowser && react && '@babel/preset-react',\n      ...extraBabelPresets\n    ].filter(Boolean) as (string | any[])[],\n    plugins: [\n      moduleType === 'cjs' &&\n        !isBrowser && [\n          require.resolve('@babel/plugin-transform-modules-commonjs'),\n          { lazy: true }\n        ],\n      require.resolve('@babel/plugin-proposal-export-default-from'),\n      require.resolve('@babel/plugin-proposal-do-expressions'),\n      require.resolve('@babel/plugin-proposal-export-namespace-from'),\n      require.resolve('@babel/plugin-proposal-nullish-coalescing-operator'),\n      require.resolve('@babel/plugin-proposal-optional-chaining'),\n      require.resolve('@babel/plugin-syntax-dynamic-import'),\n      [require.resolve('@babel/plugin-proposal-decorators'), { legacy: true }],\n      [\n        require.resolve('@babel/plugin-proposal-class-properties'),\n        { loose: true }\n      ],\n      runtimeHelpers && [\n        require.resolve('@babel/plugin-transform-runtime'),\n        {\n          useESModules: isBrowser && moduleType === 'esm',\n          version: require('@babel/runtime/package.json').version\n        }\n      ],\n      ...extraBabelPlugins\n    ].filter(Boolean) as (string | any[])[],\n    sourceMaps\n  }\n}\n"],"sourceRoot":"/Users/zoy/zmi-nerd/src"}